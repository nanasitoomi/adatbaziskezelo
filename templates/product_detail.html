{% extends 'base.html' %}

{% block title %}{{ product.title }} - Heinemann Termékadatbázis{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Kezdőlap</a></li>
                <li class="breadcrumb-item"><a href="/products">Termékek</a></li>
                {% if product.category_name %}
                <li class="breadcrumb-item"><a href="/products?category={{ product.category_name }}">{{ product.category_name }}</a></li>
                {% endif %}
                <li class="breadcrumb-item active" aria-current="page">{{ product.title }}</li>
            </ol>
        </nav>
    </div>
</div>

<div class="row">
    <div class="col-md-5">
        {% if product.image_1 %}
        <img src="{{ product.image_1 }}" class="img-fluid rounded" alt="{{ product.title }}">
        {% else %}
        <div class="bg-light rounded d-flex align-items-center justify-content-center" style="height: 400px;">
            <span class="text-muted">Nincs kép</span>
        </div>
        {% endif %}

        <div class="mt-3">
            {% if product.image_2 %}
            <img src="{{ product.image_2 }}" class="img-fluid rounded" alt="{{ product.title }}">
            {% else %}
            <div class="bg-light rounded d-flex align-items-center justify-content-center" style="height: 200px;">
                <span class="text-muted">Nincs második kép</span>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="col-md-7">
        <h1>{{ product.title }}</h1>



        <style>
            .product-table th {
                background-color: #f0f0f0;
                color: #282828;
                width: 30%;
                font-weight: 500;
            }
            .product-table td {
                background-color: #ffffff;
            }
        </style>
        <table class="table table-striped product-table">
            <tbody>
                {% if product.sku %}
                <tr>
                    <th>SKU</th>
                    <td><strong>{{ product.sku }}</strong></td>
                </tr>
                {% endif %}

                {% if product.brand %}
                <tr>
                    <th>Márka</th>
                    <td>{{ product.brand }}</td>
                </tr>
                {% endif %}

                {% if product.vendor %}
                <tr>
                    <th>Gyártó</th>
                    <td>{{ product.vendor }}</td>
                </tr>
                {% endif %}

                {% if product.product_type %}
                <tr>
                    <th>Kategória</th>
                    <td>{{ product.product_type }}</td>
                </tr>
                {% endif %}

                {% if product.origin %}
                <tr>
                    <th>Származási hely</th>
                    <td>{{ product.origin }}</td>
                </tr>
                {% endif %}

                {% if product.volume %}
                <tr>
                    <th>Kiszerelés</th>
                    <td>{{ product.volume }}</td>
                </tr>
                {% endif %}

                {% if product.alcohol_content %}
                <tr>
                    <th>Alkoholtartalom</th>
                    <td>{{ product.alcohol_content }}%</td>
                </tr>
                {% endif %}

                {% if product.taste_notes %}
                <tr>
                    <th>Ízjegyek</th>
                    <td>{{ product.taste_notes }}</td>
                </tr>
                {% endif %}

                {% if product.aging_method %}
                <tr>
                    <th>Érlelési mód</th>
                    <td>{{ product.aging_method }}</td>
                </tr>
                {% endif %}

                {% if product.grape_variety %}
                <tr>
                    <th>Szőlőfajta</th>
                    <td>{{ product.grape_variety }}</td>
                </tr>
                {% endif %}

                {% if product.vintage %}
                <tr>
                    <th>Évjárat</th>
                    <td>{{ product.vintage }}</td>
                </tr>
                {% endif %}

                {% if product.flavor %}
                <tr>
                    <th>Íz</th>
                    <td>{{ product.flavor }}</td>
                </tr>
                {% endif %}

                {% if product.barcode %}
                <tr>
                    <th>Vonalkód</th>
                    <td>{{ product.barcode }}</td>
                </tr>
                {% endif %}

                {% if product.weight %}
                <tr>
                    <th>Súly</th>
                    <td>{{ product.weight }}</td>
                </tr>
                {% endif %}

                {% if product.dimensions %}
                <tr>
                    <th>Méretek</th>
                    <td>{{ product.dimensions }}</td>
                </tr>
                {% endif %}

                {% if product.packaging %}
                <tr>
                    <th>Csomagolás</th>
                    <td>{{ product.packaging }}</td>
                </tr>
                {% endif %}

                {% if product.storage_instructions %}
                <tr>
                    <th>Tárolási utasítások</th>
                    <td>{{ product.storage_instructions }}</td>
                </tr>
                {% endif %}
            </tbody>
        </table>

        <div class="mt-4">
            <h4>Termékleírás</h4>
            <div>{{ product.description|safe }}</div>
        </div>
    </div>
</div>

<!-- Tartalom alapú ajánlások -->
{% if content_based_recommendations|length > 0 %}
<div class="row mt-5">
    <div class="col-md-12">
        <h3>Hasonló termékek</h3>
        <p class="text-muted">Ezek a termékek hasonló tulajdonságokkal rendelkeznek</p>
        <hr>
    </div>

    {% for item in content_based_recommendations %}
    <div class="col-md-3 mb-4">
        <div class="card product-card">


            {% if item.image_1 %}
            <img src="{{ item.image_1 }}" class="card-img-top product-img" alt="{{ item.title }}">
            {% else %}
            <div class="card-img-top product-img d-flex align-items-center justify-content-center bg-light">
                <span class="text-muted">Nincs kép</span>
            </div>
            {% endif %}

            <div class="card-body">
                <h5 class="card-title">{{ item.title }}</h5>
                <p class="card-text text-muted">{{ item.brand }}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <a href="/product/{{ item.id }}" class="btn btn-primary">Részletek</a>
                    <small class="text-muted">{{ (item.similarity_score * 100)|round }}% hasonlóság</small>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Márka alapú ajánlások -->
{% if brand_based_recommendations|length > 0 %}
<div class="row mt-5">
    <div class="col-md-12">
        <h3>További termékek a {{ product.brand }} márkától</h3>
        <p class="text-muted">Fedezd fel a márka további termékeit</p>
        <hr>
    </div>

    {% for item in brand_based_recommendations %}
    <div class="col-md-3 mb-4">
        <div class="card product-card">


            {% if item.image_1 %}
            <img src="{{ item.image_1 }}" class="card-img-top product-img" alt="{{ item.title }}">
            {% else %}
            <div class="card-img-top product-img d-flex align-items-center justify-content-center bg-light">
                <span class="text-muted">Nincs kép</span>
            </div>
            {% endif %}

            <div class="card-body">
                <h5 class="card-title">{{ item.title }}</h5>
                <p class="card-text text-muted">{{ item.brand }}</p>
                <a href="/product/{{ item.id }}" class="btn btn-primary">Részletek</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Kategória alapú ajánlások -->
{% if category_based_recommendations|length > 0 %}
<div class="row mt-5">
    <div class="col-md-12">
        <h3>További termékek a(z) {{ product.category_name }} kategóriából</h3>
        <p class="text-muted">Fedezd fel a kategória további termékeit</p>
        <hr>
    </div>

    {% for item in category_based_recommendations %}
    <div class="col-md-3 mb-4">
        <div class="card product-card">
            {% if item.image_1 %}
            <img src="{{ item.image_1 }}" class="card-img-top product-img" alt="{{ item.title }}">
            {% else %}
            <div class="card-img-top product-img d-flex align-items-center justify-content-center bg-light">
                <span class="text-muted">Nincs kép</span>
            </div>
            {% endif %}

            <div class="card-body">
                <h5 class="card-title">{{ item.title }}</h5>
                <p class="card-text text-muted">{{ item.brand }}</p>
                <a href="/product/{{ item.id }}" class="btn btn-primary">Részletek</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
